-- Build script for state machine generator

-- Distinguish between Windows and Linux by checking path separator
LIBS = { 'fltk', 'lua54', 'gcov' }
DEFS = '__LINUX__'
if package.config:sub(1,1) ~= '/' then
    LIBS = {'fltk', 'lua54', 'ole32', 'gdi32', 'uuid', 'comctl32', 'gcov' }
    DEFS = { 'WIN32', '_WIN32' }
end

cpp.program{'../bin/lzsmgen',
    src = '.',
    defines = DEFS,
    cflags = { '-ftest-coverage', '-fprofile-arcs' },
    libs = LIBS
}
