{"internals":"nil","transitions":[{"condition":"enable_button","name":"t1","priority":1,"position":[62,94,73,345],"action":"nil"},{"condition":"brake_button","name":"t2","priority":2,"position":[377,467,164,524],"action":"nil"},{"condition":"set_decrease_button","name":"t3","priority":2,"position":[198,353,374,341],"action":"nil"},{"condition":"set_decrease_button == 0","name":"to_ops","priority":1,"position":[671,67,707,231],"action":"nil"},{"condition":"enable_button == 0","name":"cruise_exit","priority":1,"position":[371,60,161,53],"action":"nil"},{"condition":"increase_distance_button","name":"dist_incr_command","priority":2,"position":[767,233,1005,216],"action":"nil"},{"condition":"increase_distance_button == 0\n","name":"incr_dist_end","priority":1,"position":[1004,283,763,280],"action":"nil"},{"condition":"enable_button == 0","name":"enable_cancel","priority":1,"position":[187,296,150,92],"action":"nil"},{"condition":"decrease_distance_button","name":"get_closer","priority":4,"position":[777,424,993,462],"action":"nil"},{"condition":"decrease_distance_button == 0\n","name":"transition","priority":1,"position":[992,500,780,548],"action":"nil"},{"condition":"resume_increase_button == 0","name":"stop_increase","priority":1,"position":[520,307,701,276],"action":"nil"},{"condition":"resume_increase_button","name":"up_speed","priority":0,"position":[702,247,519,226],"action":"nil"},{"condition":"set_decrease_button","name":"down_speed","priority":0,"position":[701,349,532,415],"action":"nil"},{"condition":"set_decrease_button == 0","name":"stop_down","priority":1,"position":[522,489,699,539],"action":"nil"},{"condition":"resume_increase_button","name":"start_resume","priority":0,"position":[166,542,409,620],"action":"nil"},{"condition":"resume_increase_button == 0","name":"resume","priority":1,"position":[503,630,711,566],"action":"nil"}],"dependencies":"#include \"cruise_io.h\"\n\n#define MIN_DIST  10\n#define MAX_DIST  100\n#define MAX_SPEED  180","states":[{"default":true,"name":"Idle","position":[19,20,169,106],"entry":"nil","during":"internal_state = 0;\ncruise_status = 0;"},{"default":false,"name":"Enabled","position":[18,273,212,614],"entry":"internal_state = 1;\ncruise_status = 0;\nif (distance_setting < MIN_DIST)\ndistance_setting = MIN_DIST;","during":"nil"},{"default":false,"name":"Active","position":[359,10,1179,649],"entry":"cruise_status = 1;","during":"nil"},{"default":true,"name":"Init_Speed","position":[572,30,719,107],"entry":"speed_setting = actual_kph;\ninternal_state = 2;","during":"nil"},{"default":false,"name":"operating","position":[402,166,1144,587],"entry":"nil","during":"// Give priority to the manual accelerator if it is less than\n// the cruise\nif (cruise_accelerator > accelerator || accelerator == 0)\n{\nif (actual_distance < distance_setting)\n{\n    if (cruise_accelerator > 10)\n    {\n        cruise_accelerator -= 10;\n    }\n    else\n    {\n        cruise_accelerator = 0;\n    }\n}\nif (speed_setting < actual_kph)\n{\n    if (cruise_accelerator > 10)\n    {\n        cruise_accelerator -= 10;\n    }\n    else\n    {\n        cruise_accelerator = 0;\n    }\n}\nelse if (actual_distance > distance_setting && speed_setting > actual_kph)\n{\n    cruise_accelerator += 5;\n}\n\nif (cruise_accelerator > 100) cruise_accelerator = 100;\n}\n"},{"default":false,"name":"steady","position":[690,206,788,578],"entry":"internal_state = 3;","during":"nil"},{"default":false,"name":"increasing_dist","position":[994,187,1114,308],"entry":"internal_state = 4;","during":"// Add 1 meter to distance\nif (distance_setting < MAX_DIST)\ndistance_setting++;"},{"default":false,"name":"decreasing_dist","position":[980,434,1117,524],"entry":"internal_state = 5;","during":"// Subtract 1 meter from distance\nif (distance_setting > MIN_DIST)\ndistance_setting--;"},{"default":false,"name":"increasing_speed","position":[416,193,527,326],"entry":"internal_state = 6;","during":"if (speed_setting < MAX_SPEED)\nspeed_setting++;"},{"default":false,"name":"reducing_speed","position":[426,367,539,530],"entry":"internal_state = 7;","during":"if (speed_setting > 0)\nspeed_setting--;"},{"default":false,"name":"resume_ready","position":[67,504,167,554],"entry":"internal_state = 8;","during":"nil"},{"default":false,"name":"resume_speed","position":[395,594,514,639],"entry":"internal_state = 9;","during":"nil"},{"default":false,"name":"no_resume","position":[47,344,122,389],"entry":"internal_state = 10;","during":"nil"}]}
